@using MyForum.Infrastructure
@using MyForum.Web.Models.Comments
@model CommentsAllViewModel
@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    ViewData["Title"] = "All Comments";
}

<div class="container-fluid w-100">
    <div class="media w-50">
        <div class="media-body text-center">
            <label asp-for="@Model.ThreadContent"></label>
            <textarea readonly
                      asp-for="@Model.ThreadContent"
                      rows="4"
                      class="form-control"></textarea>
        </div>
    </div>
    <br />
    <hr />
    <br />
</div>


@foreach (var comment in Model.Comments)
{
    <div class="container-fluid w-100 d-flex align-items-end flex-column">
        <ul class="list-inline list-unstyled text-left mr-2">
            <li class="list-inline-item"><i class="fas fa-user"></i> User: @comment.CommentCreator</li>
            <li class="list-inline-item"><i class="fas fa-calendar-alt"></i> Created on: @comment.CreatedOn</li>
            <li class="list-inline-item"><i class="fas fa-calendar-alt"></i> Modified on: @comment.ModifiedOn</li>
        </ul>
        <div class="media p-2">
            <div class="media-body">
                <textarea asp-for="@comment.Content"
                          rows="6"
                          class="form-control comment"></textarea>
            </div>
        </div>
        @if (this.User.Identity.Name == comment.CommentCreator)
        {
            <div class="form-group mr-2">
                <a asp-controller="Comments" asp-action="Edit" asp-route-commentId="@comment.Id" class="mr-2">Edit</a>
                <a asp-controller="Comments" asp-action="Delete" asp-route-commentId="@comment.Id">Delete</a>
            </div>
        }
        else
        {
            if (this.User.IsInRole(GlobalConstants.AdminRole))
            {
                <div class="form-group mr-2">
                    <a asp-controller="Comments"
                       asp-action="Quote"
                       asp-route-commentId="@comment.Id" class="mr-2">Quote</a>
                    <a asp-controller="Comments"
                       asp-action="Delete"
                       asp-route-commentId="@comment.Id">Delete</a>
                </div>
            }
            else
            {
                <div class="form-group mr-2">
                    <a asp-controller="Comments"
                       asp-action="Quote"
                       asp-route-commentId="@comment.Id" class="mr-2">Quote</a>
                </div>
            }
        }
        <br />
        <br />
    </div>
}